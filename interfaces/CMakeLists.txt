#
# Copyright (c) 2017-2019, Battelle Memorial Institute; Lawrence Livermore
# National Security, LLC; Alliance for Sustainable Energy, LLC.
# See the top-level NOTICE for additional details.
# All rights reserved.
#
# SPDX-License-Identifier: BSD-3-Clause
#

if(ENABLE_SWIG)
  if(WIN32 AND NOT MSYS)
    if(NOT CMAKE_PROGRAM_PATH)
      set(
        CMAKE_PROGRAM_PATH
        "C:/local/swigwin-3.0.12"
        "C:/local/swigwin-3.0.11"
        "C:/local/swigwin-3.0.10"
      )
    else()
      set(
        CMAKE_PROGRAM_PATH
        "${CMAKE_PROGRAM_PATH}"
        "C:/local/swigwin-3.0.12"
        "C:/local/swigwin-3.0.11"
        "C:/local/swigwin-3.0.10"
      )
    endif()
  endif()
  if(POLICY CMP0078)
    # Policy CMP0078 introduced since CMake 3.13.2 so if we want to be compatible this affects the targets generated by swig
    # with older versions (see cmake_minimum_required) we should put 'cmake_policy' under
    # condition.
    cmake_policy(SET CMP0078 OLD)
  endif()
  find_package(SWIG REQUIRED 3.0)
  include(${SWIG_USE_FILE})
endif()

include_directories(${CMAKE_CURRENT_SOURCE_DIR})
include_directories("${HELICS_SOURCE_DIR}/src/helics/shared_api_library")
include_directories("${HELICS_BINARY_DIR}/src/helics/shared_api_library")

if(BUILD_PYTHON_INTERFACE)
  add_subdirectory(python)
  if(BUILD_PYTHON2_INTERFACE)
    message(
      WARNING "PYTHON2 interface will not be built since python 3 build is active"
    )
  endif()
elseif(BUILD_PYTHON2_INTERFACE)
  add_subdirectory(python2)
endif()

if(BUILD_JAVA_INTERFACE)
  add_subdirectory(java)
endif()

if(BUILD_MATLAB_INTERFACE)
  add_subdirectory(matlab)
endif()

if(BUILD_OCTAVE_INTERFACE)
  add_subdirectory(octave)
endif()

if(BUILD_CSHARP_INTERFACE)
   add_subdirectory(csharp)
endif()
